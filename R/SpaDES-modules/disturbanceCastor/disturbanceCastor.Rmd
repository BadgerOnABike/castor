---
title: "disturbanceCastor"
author: ""
date: "5 December 2022"
output: pdf_document
---

# Overview

This module takes the output from a series of *Castor* disturbance modules and calculates the area disturbed given specific assumptions surrounding the type of disturbance. For roads, a user defined buffer is used; whereas for cutblocks, an age parameter is used to define early when calculating the cumulative area of early cutblocks.

This was designed for measuring disturbance specific to forestry and caribou habitat, but could be modified to include other forms of disturbance metrics. 

# Usage

```{r module_usage}
library (SpaDES.core)
library (data.table)
library (dplyr)
source (here::here("R/functions/R_Postgres.R"))

moduleDir <- paste0(here::here(),"/R/SpaDES-modules")
outputDir <- paste0(here::here(),"/R/SpaDES-modules/disturbanceCastor")

times <- list(start = 0, end = 2)

parameters <- list(
  .progress = list(type = NA, interval = NA),
  .globals = list(),
  dataCastor = list(saveCastorDB = TRUE,
                    randomLandscape = list(100,100,0,100,0,100),
                    randomLandscapeClusterLevel = 1.2,
                    randomLandscapeZoneConstraint = 
                    data.table(variable = 'age', threshold = 140, type = 'ge', percentage = 20)
                     ),
  disturbanceCastor = list (calculateInterval =  1, 
                            criticalHabitatTable = "vat.vat_bc_crithab_and_herd",
                            criticalHabRaster = "rast.bc_crithab_and_herd",
                            permDisturbanceRaster = "rast.mine_ag_wind_rail",
                            recovery = 300)
)

modules <- list("dataCastor", "disturbanceCastor")

objects <- list (scenario = data.table (name = "test", description = "test"))

paths <- list(
  modulePath = moduleDir,
  outputPath = outputDir
)

mySim <- simInit(times = times, params = parameters, modules = modules,
                 objects = objects, paths = paths)

mysimout<-spades(mySim,debug=TRUE) 
```


# Links to other modules

The module requires dataCastor, roadCastor, blockingCastor to work.

