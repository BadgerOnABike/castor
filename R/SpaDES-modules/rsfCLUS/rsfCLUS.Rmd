---
title: "rsfCLUS"
author: ""
date: "15 April 2019"
output:
  html_document: 
    keep_md: yes
---

<!--
Copyright 2018 Province of British Columbia
 
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
 
http://www.apache.org/licenses/LICENSE-2.0
 
Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and limitations under the License.-->

# Overview

This module tracks various Resource Selection Functions (RSF) within a CLUS simulation. 

```{r module_usage}
library (SpaDES.core)
library (data.table)
library (here)
source (paste0 (here(),"/R/functions/R_Postgres.R"))

moduleDir <- file.path (paste0 (here(),"/R/SpaDES-modules"))
inputDir <- file.path (paste0 (here(), "/R")) %>% reproducible::checkPath (create = TRUE)
outputDir <- file.path (paste0 (here(), "/R"))
cacheDir <- file.path (paste0 (here(), "/R"))
times <- list (start = 0, end = 1)
parameters <- list (
  .progress = list (type = NA, interval = NA),
  .globals = list (),
  dataLoaderCLUS = list (dbName = 'clus',
                         nameBoundaryFile = "study_area_compart",
                         nameBoundaryColumn = "tsb_number",
                         nameBoundary = c ("08B", "08C"), 
                         nameBoundaryGeom="wkb_geometry",
                         nameCutblockRaster ="rast.cns_cut_bl",
                         nameCutblockTable = "public.cns_cut_bl_polygon",
                         nameAgeRaster= "rast.vri2017_projage1",
                         nameHeightRaster= "rast.vri2017_projheight1",
                         nameCrownClosureRaster= "rast.vri2017_crownclosure"),
rsfCLUS = list(calculateInterval = 2)
)

modules <- list ("dataLoaderCLUS", "cutblockSeqPrepCLUS", "rsfCLUS")

rsf_model_coeff <- data.table (species = c("caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","caribou","caribou","caribou","caribou",
                                           "caribou","moose","moose","moose","moose","moose",
                                           "moose","moose","moose","moose","moose","moose","moose",
                                           "moose","moose","moose","moose","moose","moose","moose",
                                           "moose","moose","moose","moose","moose","moose","moose",
                                           "moose","moose","moose","moose","moose","moose","moose",
                                           "moose","moose","moose","moose","moose","moose","moose",
                                           "moose","moose","moose","moose","moose","moose","moose",
                                           "moose","moose","moose","moose","moose","moose","moose",
                                           "moose","moose","moose","moose","moose","moose","moose",
                                           "moose","moose","moose","moose","moose","moose","moose",
                                           "moose","moose","moose","moose","moose","moose","moose", 
                                           "moose"
                                           ),
                               population = c("DU6","DU6","DU6","DU6","DU6","DU6","DU6","DU6","DU6",
                                              "DU6","DU6","DU6","DU6","DU6","DU6","DU6","DU6","DU6",
                                              "DU6","DU6","DU6","DU6","DU6","DU6","DU6","DU6","DU6",
                                              "DU6","DU6","DU6","DU6","DU6","DU6","DU6","DU6","DU6",
                                              "DU6","DU6","DU6","DU6","DU6","DU6","DU6","DU6","DU6",
                                              "DU6","DU6","DU6","DU6","DU6","DU6","DU6","DU6","DU6",
                                              "DU6","DU6","DU6","DU6","DU6","DU6","DU6","DU6","DU6",
                                              "DU6","DU6","DU6","DU6","DU6","DU6","DU6","DU6","DU6",
                                              "DU6","DU6","DU6","DU6","DU8","DU8","DU8","DU8","DU8",
                                              "DU8","DU8","DU8","DU8","DU8","DU8","DU8","DU8","DU8",
                                              "DU8","DU8","DU8","DU8","DU8","DU8","DU8","DU8","DU8",
                                              "DU8","DU8","DU8","DU8","DU8","DU8","DU8","DU8","DU8",
                                              "DU8","DU8","DU8","DU8","DU8","DU8","DU8","DU8","DU8",
                                              "DU8","DU8","DU8","DU8","DU8","DU8","DU8","DU8","DU8",
                                              "DU8","DU8","DU8","DU8","DU8","DU8","DU8","DU8","DU7",
                                              "DU7","DU7","DU7","DU7","DU7","DU7","DU7","DU7","DU7",
                                              "DU7","DU7","DU7","DU7","DU7","DU7","DU7","DU7","DU7",
                                              "DU7","DU7","DU7","DU7","DU7","DU7","DU7","DU7","DU7",
                                              "DU7","DU7","DU7","DU7","DU7","DU7","DU7","DU7","DU7",
                                              "DU7","DU7","DU7","DU7","DU7","DU7","DU7","DU7","DU7",
                                              "DU7","DU7","DU7","DU7","DU7","DU7","DU7","DU7","DU7",
                                              "DU7","DU7","DU7","DU7","DU7","DU7","DU7","DU7","DU7",
                                              "DU7","DU7","DU7","DU9","DU9","DU9","DU9","DU9","DU9",
                                              "DU9","DU9","DU9","DU9","DU9","DU9","DU9","DU9","DU9",
                                              "DU9","DU9","DU9","DU9","DU9","DU9","DU9","DU9","DU9",
                                              "DU9","DU9","DU9","DU9","DU9","DU9","DU9","DU9","DU9",
                                              "DU9","DU9","DU9","DU9","DU9","DU9","DU9","DU9","DU9",
                                              "DU9","DU9","DU9","DU9","DU9","DU9","DU9","DU9","DU9",
                                              "DU9","DU9","DU9","DU9","DU9","DU9","DU9","DU9","DU9",
                                              "DU7","DU7","DU7","DU7","DU7","DU7","DU7","DU7","DU7",
                                              "DU7","DU7","DU7","DU7","DU7","DU7","DU7","DU7","DU7",
                                              "DU7","DU7","DU7","DU7","DU7","DU7","DU7","DU7","DU7",
                                              "DU7","DU7","DU7","DU7","DU7","DU7","DU7","DU7","DU7",
                                              "DU7","DU7","DU7","DU7","DU7","DU7","DU7","DU7","DU7",
                                              "DU7","DU7","DU7","DU7","DU7","DU7","DU7","DU7","DU7",
                                              "DU7","DU7","DU7","DU7","DU7","DU7","DU7","DU7","DU7",
                                              "DU7","DU7","DU7","DU7","DU7","DU7","DU7","DU7","DU7",
                                              "DU7","DU7","DU7","DU7"
                                              ),
                            season = c ("EW","EW","EW","EW","EW","EW","EW","EW","EW","EW","EW","EW",
                                        "EW","EW","EW","EW","EW","EW","EW","EW","EW","EW","EW","EW",
                                        "EW","LW","LW","LW","LW","LW","LW","LW","LW","LW","LW","LW",
                                        "LW","LW","LW","LW","LW","LW","LW","LW","LW","LW","LW","LW",
                                        "LW","LW","S","S","S","S","S","S","S","S","S","S","S","S",
                                        "S","S","S","S","S","S","S","S","S","S","S","S","S","S","EW",
                                        "EW","EW","EW","EW","EW","EW","EW","EW","EW","EW","EW","EW",
                                        "EW","LW","LW","LW","LW","LW","LW","LW","LW","LW","LW","LW",
                                        "LW","LW","LW","LW","LW","LW","LW","LW","LW","LW","LW","LW",
                                        "S","S","S","S","S","S","S","S","S","S","S","S","S","S","S",
                                        "S","S","S","S","S","S","EW","EW","EW","EW","EW","EW","EW",
                                        "EW","EW","EW","EW","EW","EW","EW","EW","EW","EW","EW","EW",
                                        "EW","EW","EW","EW","EW","EW","LW","LW","LW","LW","LW","LW",
                                        "LW","LW","LW","LW","LW","LW","LW","LW","LW","LW","LW","LW",
                                        "LW","LW","LW","S","S","S","S","S","S","S","S","S","S","S",
                                        "S","S","S","S","S","S","S","S","S","S","EW","EW","EW","EW",
                                        "EW","EW","EW","EW","EW","EW","EW","EW","EW","EW","EW","EW",
                                        "EW","EW","EW","EW","EW","LW","LW","LW","LW","LW","LW","LW",
                                        "LW","LW","LW","LW","LW","LW","LW","LW","LW","LW","LW","LW",
                                        "LW","LW","S","S","S","S","S","S","S","S","S","S","S","S",
                                        "S","S","S","S","S","S","LW","LW","LW","LW","LW","LW","LW",
                                        "LW","LW","LW","LW","LW","LW","LW","LW","LW","LW","C","C",
                                        "C","C","C","C","C","C","C","C","C","C","C","C","C","S","S",
                                        "S","S","S","S","S","S","S","S","S","S","S","F","F","F","F",
                                        "F","F","F","F","F","F","F","F","F","F","F","EW","EW","EW",
                                        "EW","EW","EW","EW","EW","EW","EW","EW","EW","EW","EW","EW",
                                        "EW"
                                        ),
                            bounds = c("rast.du6_bounds","rast.du6_bounds","rast.du6_bounds",
                                       "rast.du6_bounds","rast.du6_bounds","rast.du6_bounds",
                                       "rast.du6_bounds","rast.du6_bounds","rast.du6_bounds",
                                       "rast.du6_bounds","rast.du6_bounds","rast.du6_bounds",
                                       "rast.du6_bounds","rast.du6_bounds","rast.du6_bounds",
                                       "rast.du6_bounds","rast.du6_bounds","rast.du6_bounds",
                                       "rast.du6_bounds","rast.du6_bounds","rast.du6_bounds",
                                       "rast.du6_bounds","rast.du6_bounds","rast.du6_bounds",
                                       "rast.du6_bounds","rast.du6_bounds","rast.du6_bounds",
                                       "rast.du6_bounds","rast.du6_bounds","rast.du6_bounds",
                                       "rast.du6_bounds","rast.du6_bounds","rast.du6_bounds",
                                       "rast.du6_bounds","rast.du6_bounds","rast.du6_bounds",
                                       "rast.du6_bounds","rast.du6_bounds","rast.du6_bounds",
                                       "rast.du6_bounds","rast.du6_bounds","rast.du6_bounds",
                                       "rast.du6_bounds","rast.du6_bounds","rast.du6_bounds",
                                       "rast.du6_bounds","rast.du6_bounds","rast.du6_bounds",
                                       "rast.du6_bounds","rast.du6_bounds","rast.du6_bounds",
                                       "rast.du6_bounds","rast.du6_bounds","rast.du6_bounds",
                                       "rast.du6_bounds","rast.du6_bounds","rast.du6_bounds",
                                       "rast.du6_bounds","rast.du6_bounds","rast.du6_bounds",
                                       "rast.du6_bounds","rast.du6_bounds","rast.du6_bounds",
                                       "rast.du6_bounds","rast.du6_bounds","rast.du6_bounds",
                                       "rast.du6_bounds","rast.du6_bounds","rast.du6_bounds",
                                       "rast.du6_bounds","rast.du6_bounds","rast.du6_bounds",
                                       "rast.du6_bounds","rast.du6_bounds","rast.du6_bounds",
                                       "rast.du6_bounds","rast.du8_bounds","rast.du8_bounds",
                                       "rast.du8_bounds","rast.du8_bounds","rast.du8_bounds",
                                       "rast.du8_bounds","rast.du8_bounds","rast.du8_bounds",
                                       "rast.du8_bounds","rast.du8_bounds","rast.du8_bounds",
                                       "rast.du8_bounds","rast.du8_bounds","rast.du8_bounds",
                                       "rast.du8_bounds","rast.du8_bounds","rast.du8_bounds",
                                       "rast.du8_bounds","rast.du8_bounds","rast.du8_bounds",
                                       "rast.du8_bounds","rast.du8_bounds","rast.du8_bounds",
                                       "rast.du8_bounds","rast.du8_bounds","rast.du8_bounds",
                                       "rast.du8_bounds","rast.du8_bounds","rast.du8_bounds",
                                       "rast.du8_bounds","rast.du8_bounds","rast.du8_bounds",
                                       "rast.du8_bounds","rast.du8_bounds","rast.du8_bounds",
                                       "rast.du8_bounds","rast.du8_bounds","rast.du8_bounds",
                                       "rast.du8_bounds","rast.du8_bounds","rast.du8_bounds",
                                       "rast.du8_bounds","rast.du8_bounds","rast.du8_bounds",
                                       "rast.du8_bounds","rast.du8_bounds","rast.du8_bounds",
                                       "rast.du8_bounds","rast.du8_bounds","rast.du8_bounds",
                                       "rast.du8_bounds","rast.du8_bounds","rast.du8_bounds",
                                       "rast.du8_bounds","rast.du8_bounds","rast.du8_bounds",
                                       "rast.du8_bounds","rast.du8_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du9_bounds","rast.du9_bounds","rast.du9_bounds",
                                       "rast.du9_bounds","rast.du9_bounds","rast.du9_bounds",
                                       "rast.du9_bounds","rast.du9_bounds","rast.du9_bounds",
                                       "rast.du9_bounds","rast.du9_bounds","rast.du9_bounds",
                                       "rast.du9_bounds","rast.du9_bounds","rast.du9_bounds",
                                       "rast.du9_bounds","rast.du9_bounds","rast.du9_bounds",
                                       "rast.du9_bounds","rast.du9_bounds","rast.du9_bounds",
                                       "rast.du9_bounds","rast.du9_bounds","rast.du9_bounds",
                                       "rast.du9_bounds","rast.du9_bounds","rast.du9_bounds",
                                       "rast.du9_bounds","rast.du9_bounds","rast.du9_bounds",
                                       "rast.du9_bounds","rast.du9_bounds","rast.du9_bounds",
                                       "rast.du9_bounds","rast.du9_bounds","rast.du9_bounds",
                                       "rast.du9_bounds","rast.du9_bounds","rast.du9_bounds",
                                       "rast.du9_bounds","rast.du9_bounds","rast.du9_bounds",
                                       "rast.du9_bounds","rast.du9_bounds","rast.du9_bounds",
                                       "rast.du9_bounds","rast.du9_bounds","rast.du9_bounds",
                                       "rast.du9_bounds","rast.du9_bounds","rast.du9_bounds",
                                       "rast.du9_bounds","rast.du9_bounds","rast.du9_bounds",
                                       "rast.du9_bounds","rast.du9_bounds","rast.du9_bounds",
                                       "rast.du9_bounds","rast.du9_bounds","rast.du9_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds","rast.du7_bounds","rast.du7_bounds",
                                       "rast.du7_bounds"
                                       ),
                            static = c ("Y","Y","Y","Y","N","N","N","Y","N","Y","Y","Y","Y","Y","Y",
                                        "Y","Y","Y","Y","Y","Y","N","Y","N","N","Y","Y","Y","Y","N",
                                        "N","N","Y","N","Y","Y","Y","Y","Y","Y","Y","Y","Y","Y","Y",
                                        "Y","N","Y","N","N","Y","Y","Y","Y","N","N","N","Y","N","Y",
                                        "Y","Y","Y","Y","Y","Y","Y","Y","Y","Y","Y","Y","N","Y","N",
                                        "N","Y","Y","N","N","N","N","N","Y","Y","Y","Y","Y","Y","Y",
                                        "Y","Y","Y","Y","Y","N","N","N","N","N","Y","Y","Y","Y","Y",
                                        "Y","Y","N","Y","Y","Y","Y","Y","Y","Y","Y","Y","N","N","N",
                                        "N","N","Y","Y","Y","Y","Y","Y","N","Y","Y","Y","Y","Y","Y",
                                        "Y","Y","Y","Y","N","N","N","Y","N","Y","Y","Y","Y","Y","Y",
                                        "Y","Y","Y","N","N","Y","Y","Y","Y","Y","Y","Y","Y","Y","N",
                                        "N","N","Y","Y","Y","Y","Y","Y","Y","Y","N","Y","N","Y","Y",
                                        "Y","Y","Y","Y","Y","N","N","N","Y","Y","Y","Y","Y","Y","Y",
                                        "Y","N","Y","Y","Y","Y","Y","Y","Y","Y","Y","N","N","N","N",
                                        "N","Y","Y","Y","Y","Y","Y","N","N","Y","Y","Y","Y","Y","Y",
                                        "Y","Y","N","N","N","N","N","Y","Y","Y","Y","N","Y","Y","Y",
                                        "N","Y","Y","Y","Y","Y","Y","Y","N","N","N","N","N","Y","Y",
                                        "Y","Y","N","Y","Y","Y","Y","Y","Y","Y","Y","Y","Y","Y","Y",
                                        "Y","Y","Y","Y","Y","Y","N","N","Y","Y","Y","Y","Y","Y","Y",
                                        "Y","Y","Y","Y","Y","Y","N","N","Y","Y","Y","Y","Y","Y","Y",
                                        "Y","Y","Y","Y","N","N","Y","Y","Y","Y","Y","Y","Y","Y","Y",
                                        "Y","N","N","Y","Y","Y","Y","Y","Y","Y","Y","Y","Y","Y","Y",
                                        "Y","Y","Y","N","N","Y","N"
                                        ),
                            beta = c(-2.56292,-0.01776,-0.01870,-0.02206,-0.05482,-0.15491,-0.10350,
                                     0.03725,0.02940,0.00804,0.16724,0.49822,0.16128,-0.30526,
                                     -0.10831,-0.14529,-0.15568,1.00000,1.00000,0.14354,0.12382,
                                     0.07630,0.08514,-0.15519,0.00479,-2.07467,-0.04153,0.00639,
                                     0.01268,-0.05606,-0.04756,-0.01363,-0.00181,0.03323,0.06308,
                                     0.21316,-0.06136,-0.24502,-0.41433,-0.21353,0.04349,-0.04058,
                                     1.00000,1.00000,0.13937,0.01874,0.07537,0.05259,-0.21433,
                                     0.08297,-1.78539,-0.05895,0.06837,0.05367,-0.11194,-0.26659,
                                     -0.16262,0.01986,0.06206,0.10752,0.06845,-0.20150,-0.14326,
                                     -0.25276,-0.01891,0.30986,0.09115,0.08235,1.00000,1.00000,
                                     0.14901,0.07282,0.11211,0.13457,-0.13097,0.13981,-2.88167,
                                     1.00000,0.02932,-0.14178,0.06689,-0.12719,0.00248,0.13032,
                                     -0.05028,-1.02461,-0.10057,-0.20953,-0.06267,0.42835,-1.93693,
                                     -0.60122,-0.06432,0.02375,1.35767,-0.02184,-0.19594,-0.01181,
                                     -0.03565,0.02286,-0.09524,0.21120,-0.11099,0.14883,-1.20599,
                                     -0.08847,-0.45233,0.08790,-0.26561,0.05554,-0.06945,-1.13934,
                                     0.20951,-1.33767,-0.37005,-0.13619,0.13806,-0.00788,0.06212,
                                     -0.18366,0.01979,0.12431,0.14426,-0.18358,-0.33415,-0.00315,
                                     -0.55541,-0.12787,-0.06110,-0.20115,0.10372,-0.06420,1.00000,
                                     -0.21863,-2.07000,-0.35000,-0.18000,0.02000,0.54000,-0.23000,
                                     0.05000,-0.14000,0.05000,0.06000,0.41000,-0.05000,0.04000,
                                     0.20000,-0.32000,-0.08000,-0.26000,-0.40000,-0.16000,-0.02000,
                                     -0.12000,-0.05000,0.08000,-0.01000,0.12000,-1.63723,-0.33360,
                                     -0.14484,0.05753,0.62338,-0.23203,-0.12232,0.05490,-0.03995,
                                     -0.07823,0.11419,0.06174,0.38404,0.14815,-0.27892,0.01433,
                                     -0.04630,-0.04421,-0.12244,-0.10422,-0.45722,-1.01600,-0.41000,
                                     -0.25900,0.00500,0.74500,-0.03200,0.02900,0.03800,-0.01600,
                                     -0.01700,0.02700,-0.17400,-0.09500,0.45400,-0.37800,0.07000,
                                     -0.14000,0.04900,0.10300,0.44900,0.01300,-2.82000,-0.40000,
                                     0.14000,-0.16000,1.92000,-0.88000,0.10000,0.10000,-0.06000,
                                     -0.29000,-1.08000,0.37000,0.37000,-1.46000,-1.04000,1.08000,
                                     0.14000,0.10000,0.19000,0.24000,-0.15000,-2.80000,-0.67000,
                                     -0.44000,0.00000,0.70000,-0.34000,-0.17000,0.18000,-0.37000,
                                     0.31000,-0.86000,1.03000,-0.69000,-0.93000,0.25000,0.24000,
                                     0.10000,-0.01000,0.11000,0.17000,-0.19000,-2.20000,-0.41000,
                                     -0.04000,0.24000,0.68000,0.04000,0.03000,0.22000,0.13000,
                                     -0.05000,0.11000,0.07000,0.04000,-2.03000,0.15000,0.04000,
                                     -0.05000,0.04000,-4.51000,0.00547,-0.0000025,-0.00003,-0.00006,
                                     0.11000,0.32000,-1.95000,-0.22000,0.63000,0.47000,0.23000,
                                     0.26000,-0.41000,0.41000,-0.06000,0.01000,-3.48000,0.00383,
                                     -0.0000018,0.00011,-0.00011,-0.07000,0.59000,-0.55000,-0.16000,
                                     0.97000,-0.03000,0.23000,-0.22000,-0.12000,-0.65000,-3.81000,
                                     0.00387,-0.0000018,0.29000,0.20000,0.14000,0.14000,-0.06000,
                                     0.23000,-0.05000,0.17000,-0.30000,-0.10000,-1.76000,0.0004,
                                     -0.0000003,0.00003,0.00004,0.18000,0.28000,0.39000,-0.04000,
                                     -0.06000,0.01000,-0.31000,0.21000,-0.10000,-0.39000,-3.97000,
                                     0.00430,-0.000002,0.00001,-0.40000,0.18000,0.79000,-0.71000,
                                     0.56000,0.13000,-0.76000,0.33000,0.08000,-0.20000,0.00001,
                                     0.00001
                                     ),
                            layer = c ( "int","bc_ha_slope","dt_waterbodies","dt_watercourses",
                                        "blocks_0_4", "blocks_5_9","blocks_10_60",
"dt_crds_paved","dt_resource_road",
                                     "dt_pipelines","beetle_1_5","beetle_6_9","fire_1_5","fire_6_25",
                                     "fire_gt_25","grow_deg_day","ppt_snow_winter","bec_current",
                                     "demars_wetland","vri2017_bryoidcoverpct","vri2017_herbcoverpct",
                                     "age","vri2017_shrubcrownclosure","height",
                                     "crownCover","int","bc_ha_slope","dt_waterbodies",
                                     "dt_watercourses",
"blocks_0_4", "blocks_5_9","blocks_10_60",
"dt_crds_paved","dt_resource_road",
                                     "dt_pipelines","beetle_1_5","beetle_6_9","fire_1_5","fire_6_25",
                                     "fire_gt_25","grow_deg_day","ppt_snow_winter",
                                     "bec_current","demars_wetland","vri2017_bryoidcoverpct",
                                     "vri2017_herbcoverpct","age","vri2017_shrubcrownclosure",
                                     "height","crownCover","int","bc_ha_slope",
                                     "dt_waterbodies","dt_watercourses","blocks_0_4", "blocks_5_9","blocks_10_60","dt_crds_paved",
                                     "dt_resource_road","dt_pipelines","beetle_1_5","beetle_6_9",
                                     "fire_1_5","fire_6_25","fire_gt_25",
"ppt_as_snow_annual", # needs rename?
"ppt_summer", # needs rename?
"mean_temp_summer",# needs rename?
                                "bec_current","demars_wetland","vri2017_bryoidcoverpct","vri2017_herbcoverpct","age",
                                     "vri2017_shrubcrownclosure","height","crownCover",
                                     "int","bec_current","blocks_0_4","blocks_5_9","blocks_10_29","blocks_30_60",
                                     "dt_resource_road","beetle_1_5","beetle_6_9","fire_1_5",
                                     "fire_6_25","fire_gt_25","vri2017_shrubcrownclosure",
                                     "vri2017_bryoidcoverpct","int","bc_ha_slope","dt_watercourses",
                                     "dt_waterbodies",
"elevation",# needs rename?
"blocks_0_4","blocks_5_9","blocks_10_29","blocks_30_60","dt_resource_road","dt_pipelines",
"dt_agriculture", # needs rename?
"beetle_1_5","beetle_6_9","fire_1_5",
                                     "fire_6_25","fire_gt_25","age",
"vri_siteindex",# needs rename?
                                     "vri2017_herbcoverpct","vri2017_shrubcrownclosure","ppt_snow_winter",
                                    
 "temp_winter", # needs rename?

"int","bc_ha_slope","dt_watercourses","dt_waterbodies",
                                     "blocks_0_4","blocks_5_9","blocks_10_29","blocks_30_60",
                                     "dt_resource_road","dt_pipelines","beetle_1_5","beetle_6_9",
                                     "fire_1_5","fire_6_25","fire_gt_25","age",
                                     
"vri_siteindex", # needs rename?
"vri2017_herbcoverpct","vri2017_shrubcrownclosure","bec_current",

"ppt_annual", # needs rename?

"int","bc_ha_slope","dt_watercourses",
                                     "dt_waterbodies",
"elevation", # needs rename?
"blocks_0_4","blocks_5_9","blocks_10_60",
                                     "dt_crds_paved","dt_resource_road","dt_pipelines",
"dt_mine", # needs rename?
                                     "beetle_1_5","beetle_6_9","fire_1_5","fire_6_25","fire_gt_25",
                                     "ppt_snow_winter",
"mean_winter_temp", # needs rename?
                                     "age",
                                     "crownCover",
"vri_site_index", # needs rename?
"vri2017_herbcoverpct","vri2017_shrubcrownclosure","vri2017_bryoidcoverpct","int","bc_ha_slope",
                                     "dt_watercourses","dt_waterbodies",
"elevation",# needs rename?
                                     "blocks_0_4","blocks_5_60",
                                     "dt_resource_road","dt_crds_paved","dt_pipelines",
"dt_mine",# needs rename?
                                     "beetle_1_5","beetle_6_9","fire_1_5","fire_6_25","fire_gt_25",
                                     "age","vri_site_index","crownCover",
"mean_winter_temp",# needs rename?
"ppt_snow_winter","int","bc_ha_slope",
                                     "dt_watercourses","dt_waterbodies",
"elevation",# needs rename?
                                     "blocks_0_4","blocks_5_60",
                                     "dt_resource_road","dt_crds_paved","dt_pipelines",
"dt_mine",# needs rename?
                                     "beetle_1_5","beetle_6_9","fire_1_5","fire_6_25","fire_gt_25",
                                     "age","vri2017_bryoidcoverpct","vri2017_shrubcrownclosure",
                                     
"mean_annual_temp",# needs rename?
"mean_annual_ppt",# needs rename?
"int","bc_ha_slope",
                                     "dt_watercourses","dt_waterbodies",
"elevation",# needs rename?
                                     "blocks_0_4","blocks_5_9","blocks_10_29","blocks_30_60",
                                     "dt_resource_road","dt_pipelines","beetle_1_5","beetle_6_9",
                                     "fire_6_25","fire_gt_25",
"mean_annual_temp",# needs rename?
"age",
                                     "crownCover",
"vri_siteindex", # needs rename?
                                      "vri2017_herbcoverpct",
                                     "vri2017_shrubcrownclosure","int","bc_ha_slope","dt_watercourses",
                                     "dt_waterbodies",
"elevation", # needs rename?
"blocks_0_4","blocks_5_9","blocks_10_29","blocks_30_60","dt_resource_road","beetle_1_5",
                                     "beetle_6_9","fire_6_25","fire_gt_25","age",
"vri_siteindex", # needs rename?
                                      "vri2017_herbcoverpct","vri2017_shrubcrownclosure",
                                     "crownCover","ppt_snow_winter",
"temp_winter",# needs rename?
"int",
                                     "bc_ha_slope","dt_watercourses","dt_waterbodies",
"elevation", # needs rename?
                                     "blocks_0_4","blocks_5_9","blocks_10_29","blocks_30_60",
                                     "dt_resource_road","dt_pipelines",
"dt_mine", # needs rename?
                                      "fire_6_25",
                                     "fire_gt_25","age",
"vri_siteindex", # needs rename?
                                     "vri2017_herbcoverpct","vri2017_shrubcrownclosure","int",
"elevation",# needs rename?
"elevation_squared",# needs rename?
                                     "eastnessx1000","northnessx1000","vri_conifer","vri_deciduous",
                                     "vri_urban","vri_pine","vri_herb","vri_nonveg_land_no_urban",
                                     "vri_nonveg_water",
"fire_not_pine_1_15","fire_pine_1_15","fire_16_40",# needs rename?
"blocks_1_15","blocks_16_40","int",
                                     
"elevation", # needs rename?
"elevation_squared",# needs rename?
                                  "eastnessx1000","northnessx1000",
                                     "vri_conifer","vri_deciduous","vri_urban","vri_pine","vri_herb",
                                     "vri_nonveg_water",
"fire_not_pine_1_15","fire_pine_1_15",# needs rename?
                                     "blocks_1_15","blocks_16_40","int",
"elevation", # needs rename?
"elevation_squared",# needs rename?
                                      "vri_conifer","vri_deciduous","vri_herb",
                                     "vri_pine","vri_nonveg_water",
"fire_not_pine_1_15","fire_pine_1_15","fire_16_40",# needs rename?
"blocks_1_15","blocks_16_40","int",
"elevation",# needs rename?
"elevation_squared",# needs rename?
                                     "eastnessx1000","northnessx1000","vri_conifer","vri_deciduous","vri_herb",
                                     "vri_pine","vri_nonveg_water","blocks_1_15",
                                     "blocks_16_40",
"fire_not_pine_1_15","fire_pine_1_15","fire_16_40",# needs rename?
"int",
"elevation", # needs rename?
"elevation_squared", # needs rename?
    "eastnessx1000",
                                     "vri_conifer","vri_deciduous","vri_herb","vri_pine",
                                     "vri_nonveg_water",
"fire_pine_1_15","fire_not_pine_1_15","fire_16_40",# needs rename?
"blocks_1_15","blocks_16_40","dt_crds_paved","dt_resource_road"
                                     ),
                            type =c("","","DT","DT","DT","DT","DT","DT","DT","DT","UP","UP","UP",
                                    "UP","UP","UP","UP","RC","RC","UP","UP","UP","UP","UP","UP",
                                    "","","DT","DT","DT","DT","DT","DT","DT","DT","UP","UP","UP",
                                    "UP","UP","UP","UP","RC","RC","UP","UP","UP","UP","UP","UP","",
                                    "","DT","DT","DT","DT","DT","DT","DT","DT","UP","UP","UP","UP",
                                    "UP","UP","UP","UP","RC","RC","UP","UP","UP","UP","UP","UP","",
                                    "RC","DT","DT","DT","DT","DT","UP","UP","UP","UP","UP","UP","UP",
                                    "","","DT","DT","","DT","DT","DT","DT","DT","DT","DT","UP","UP",
                                    "UP","UP","UP","UP","","UP","UP","UP","UP","","","DT","DT","DT",
                                    "DT","DT","DT","","DT","UP","UP","UP","UP","UP","UP","","UP",
                                    "UP","RC","UP","","","DT","DT","","DT","DT","DT","DT","DT","DT",
                                    "DT","UP","UP","UP","UP","UP","UP","UP","UP","UP","","UP","UP",
                                    "UP","","","DT","DT","","DT","DT","DT","DT","DT","DT","UP","UP",
                                    "UP","UP","UP","UP","","UP","UP","UP","","","DT","DT","","DT",
                                    "DT","DT","DT","DT","DT","UP","UP","UP","UP","UP","UP","UP","UP",
                                    "UP","UP","","","DT","DT","","DT","DT","DT","DT","DT","DT","UP",
                                    "UP","UP","UP","UP","UP","UP","","UP","UP","","","DT","DT","",
                                    "DT","DT","DT","DT","DT","UP","UP","UP","UP","UP","","UP","UP",
                                    "UP","UP","","","","","","","DT","DT","DT","DT","DT","DT","DT",
                                    "UP","UP","UP","","UP","UP","","","","","","UP","UP","UP","UP",
                                    "UP","UP","UP","UP","UP","UP","UP","UP","","","","","","UP","UP",
                                    "UP","UP","UP","UP","UP","UP","UP","UP","","","","UP","UP","UP",
                                    "UP","UP","UP","UP","UP","UP","UP","","","","","","UP","UP","UP",
                                    "UP","UP","UP","UP","UP","UP","UP","","","","","UP","UP","UP",
                                    "UP","UP","UP","UP","UP","UP","UP","DT","DT"
                                    ),
                            sql = c ('','rast.bc_ha_slope','rast.dt_waterbodies',
                                     'rast.dt_watercourses','blockid > 0 AND age BETWEEN 0 AND 4',
                                     'blockid > 0 AND age BETWEEN 5 AND 9',
                                     'blockid > 0 AND age BETWEEN 10 AND 60','rast.dt_crds_paved',
                                     'roadYear > 0','rast.dt_pipelines',
                                     'rast.beetle_1_5','rast.beetle_6_9','rast.fire_1_5',
                                     'rast.fire_6_25','rast.fire_gt_25','rast.grow_deg_day',
                                     'rast.ppt_snow_winter','rast.bec_current','rast.demars_wetland',
                                     'rast.vri2017_bryoidcoverpct','rast.vri2017_herbcoverpct',
                                     'age','rast.vri2017_shrubcrownclosure','height','crownCover',
                                     '','rast.bc_ha_slope','rast.dt_waterbodies',
                                     'rast.dt_watercourses','blockid > 0 AND age BETWEEN 0 AND 4',
                                     'blockid > 0 AND age BETWEEN 5 AND 9',
                                     'blockid > 0 AND age BETWEEN 10 AND 60','rast.dt_crds_paved',
                                     'roadYear > 0','rast.dt_pipelines',
                                     'rast.beetle_1_5','rast.beetle_6_9','rast.fire_1_5',
                                     'rast.fire_6_25','rast.fire_gt_25','rast.grow_deg_day',
                                     'rast.ppt_snow_winter','rast.bec_current','rast.demars_wetland',
                                     'rast.vri2017_bryoidcoverpct','rast.vri2017_herbcoverpct',
                                     'age','rast.vri2017_shrubcrownclosure','height','crownCover',
                                     '','rast.bc_ha_slope','rast.dt_waterbodies',
                                     'rast.dt_watercourses','blockid > 0 AND age BETWEEN 0 AND 4',
                                     'blockid > 0 AND age BETWEEN 5 AND 9',
                                     'blockid > 0 AND age BETWEEN 10 AND 60','rast.dt_crds_paved',
                                     'roadYear > 0','rast.dt_pipelines',
                                     'rast.beetle_1_5','rast.beetle_6_9','rast.fire_1_5',
                                     'rast.fire_6_25','rast.fire_gt_25',
                                     'NEEDS TO BE LOADED: ppt_as_snow_annual',
                                     'NEEDS TO BE LOADED: ppt_summer',
                                     'NEEDS TO BE LOADED: mean_temp_summer','rast.bec_current',
                                     'rast.demars_wetland','rast.vri2017_bryoidcoverpct',
                                     'rast.vri2017_herbcoverpct','age',
                                     'rast.vri2017_shrubcrownclosure','height','crownCover','',
                                     'rast.bec_current','blockid > 0 AND age BETWEEN 0 AND 4',
                                     'blockid > 0 AND age BETWEEN 5 AND 9',
                                     'blockid > 0 AND age BETWEEN 10 AND 29',
                                     'blockid > 0 AND age BETWEEN 30 AND 60','roadYear > 0',
                                     'rast.beetle_1_5','rast.beetle_6_9','rast.fire_1_5',
                                     'rast.fire_6_25','rast.fire_gt_25',
                                     'rast.vri2017_shrubcrownclosure','rast.vri2017_bryoidcoverpct',
                                     '','rast.bc_ha_slope','rast.dt_watercourses',
                                     'rast.dt_waterbodies',
                                     'NEEDS TO BE LOADED: dem_all_bc_clip',
                                     'blockid > 0 AND age BETWEEN 0 AND 4',
                                     'blockid > 0 AND age BETWEEN 5 AND 9',
                                     'blockid > 0 AND age BETWEEN 10 AND 29',
                                     'blockid > 0 AND age BETWEEN 30 AND 60','roadYear > 0',
                                     'rast.dt_pipelines',
                                    'NEEDS TO BELOADED:raster_dist_agriculture_bcalbers_ce_2015',
                                     'rast.beetle_1_5','rast.beetle_6_9','rast.fire_1_5',
                                    'rast.fire_6_25','rast.fire_gt_25','age',
                                    'NEEDS TO BE LOADED: vri_siteindex','rast.vri2017_herbcoverpct',
                                    'rast.vri2017_shrubcrownclosure','rast.ppt_snow_winter',
                                    'NEEDS TO BE LOADED: mean_temp_winter','','rast.bc_ha_slope',
                                    'rast.dt_watercourses','rast.dt_waterbodies',
                                    'blockid > 0 AND age BETWEEN 0 AND 4',
                                    'blockid > 0 AND age BETWEEN 5 AND 9',
                                    'blockid > 0 AND age BETWEEN 10 AND 29',
                                    'blockid > 0 AND age BETWEEN 30 AND 60','roadYear > 0',
                                    'rast.dt_pipelines','rast.beetle_1_5','rast.beetle_6_9',
                                    'rast.fire_1_5','rast.fire_6_25','rast.fire_gt_25','age',
                                    'NEEDS TO BE LOADED: vri_siteindex','rast.vri2017_herbcoverpct',
                                    'rast.vri2017_shrubcrownclosure','rast.bec_current',
                                    'NEEDS TO BE LOADED: ppt_annual','','rast.bc_ha_slope',
                                    'rast.dt_watercourses','rast.dt_waterbodies',
                                    'NEEDS TO BE LOADED: dem_all_bc_clip',
                                    'blockid > 0 AND age BETWEEN 0 AND 4',
                                    'blockid > 0 AND age BETWEEN 5 AND 9',
                                    'blockid > 0 AND age BETWEEN 10 AND 60',
                                    'rast.dt_crds_paved','roadYear > 0','rast.dt_pipelines',
                                    'NEEDS TO BE LOADED: raster_distance_mines_ce_2015_bcalbers',
                                    'rast.beetle_1_5','rast.beetle_6_9','rast.fire_1_5',
                                    'rast.fire_6_25','rast.fire_gt_25','rast.ppt_snow_winter',
                                    'NEEDS TO BE LOADED: mean_temp_winter','age','crownCover',
                                    'NEEDS TO BE LOADED: vri_siteindex','rast.vri2017_herbcoverpct',
                                    'rast.vri2017_shrubcrownclosure','rast.vri2017_bryoidcoverpct',
                                    '','rast.bc_ha_slope','rast.dt_watercourses','
                                    rast.dt_waterbodies','NEEDS TO BE LOADED: dem_all_bc_clip',
                                    'blockid > 0 AND age BETWEEN 0 AND 4',
                                    'blockid > 0 AND age BETWEEN 5 AND 60','roadYear > 0',
                                    'rast.dt_crds_paved','rast.dt_pipelines',
                                    'NEEDS TO BE LOADED: raster_distance_mines_ce_2015_bcalbers',
                                    'rast.beetle_1_5','rast.beetle_6_9','rast.fire_1_5',
                                    'rast.fire_6_25','rast.fire_gt_25','age',
                                    'NEEDS TO BE LOADED: vri_siteindex','crownCover',
                                    'NEEDS TO BE LOADED: mean_temp_winter','rast.ppt_snow_winter','',
                                    'rast.bc_ha_slope','rast.dt_watercourses','rast.dt_waterbodies',
                                    'NEEDS TO BE LOADED: dem_all_bc_clip',
                                    'blockid > 0 AND age BETWEEN 0 AND 4',
                                    'blockid > 0 AND age BETWEEN 5 AND 60','roadYear > 0',
                                    'rast.dt_crds_paved','rast.dt_pipelines',
                                    'NEEDS TO BE LOADED: raster_distance_mines_ce_2015_bcalbers',
                                    'rast.beetle_1_5','rast.beetle_6_9','rast.fire_1_5',
                                    'rast.fire_6_25','rast.fire_gt_25','age',
                                    'rast.vri2017_bryoidcoverpct','rast.vri2017_shrubcrownclosure',
                                    'NEEDS TO BE LOADED: mean_temp_annual',
                                    'NEEDS TO BE LOADED: ppt_annual','','rast.bc_ha_slope',
                                    'rast.dt_watercourses','rast.dt_waterbodies',
                                    'NEEDS TO BE LOADED: dem_all_bc_clip',
                                    'blockid > 0 AND age BETWEEN 0 AND 4',
                                    'blockid > 0 AND age BETWEEN 5 AND 9',
                                    'blockid > 0 AND age BETWEEN 10 AND 29',
                                    'blockid > 0 AND age BETWEEN 30 AND 60','roadYear > 0',
                                    'rast.dt_pipelines','rast.beetle_1_5','rast.beetle_6_9',
                                    'rast.fire_6_25','rast.fire_gt_25',
                                    'NEEDS TO BE LOADED: mean_temp_annual','age','crownCover',
                                    'NEEDS TO BE LOADED: vri_siteindex',
                                    'rast.vri2017_bryoidcoverpct','rast.vri2017_shrubcrownclosure',
                                    '','rast.bc_ha_slope','rast.dt_watercourses',
                                    'rast.dt_waterbodies',
                                    'NEEDS TO BE LOADED: dem_all_bc_clip',
                                    'blockid > 0 AND age BETWEEN 0 AND 4',
                                    'blockid > 0 AND age BETWEEN 5 AND 9',
                                    'blockid > 0 AND age BETWEEN 10 AND 29',
                                    'blockid > 0 AND age BETWEEN 30 AND 60','roadYear > 0',
                                    'rast.beetle_1_5','rast.beetle_6_9','rast.fire_6_25',
                                    'rast.fire_gt_25','age',
                                    'NEEDS TO BE LOADED: vri_siteindex','rast.vri2017_herbcoverpct',
                                    'rast.vri2017_shrubcrownclosure','crownCover',
                                    'rast.ppt_snow_winter',
                                    'NEEDS TO BE LOADED: mean_temp_winter','','rast.bc_ha_slope',
                                    'rast.dt_watercourses','rast.dt_waterbodies',
                                    'NEEDS TO BE LOADED: dem_all_bc_clip',
                                    'blockid > 0 AND age BETWEEN 0 AND 4',
                                    'blockid > 0 AND age BETWEEN 5 AND 9',
                                    'blockid > 0 AND age BETWEEN 10 AND 29',
                                    'blockid > 0 AND age BETWEEN 30 AND 60','roadYear > 0',
                                    'rast.dt_pipelines',
                                    'NEEDS TO BE LOADED: raster_distance_mines_ce_2015_bcalbers',
                                    'rast.fire_6_25','rast.fire_gt_25','age',
                                    'NEEDS TO BE LOADED: vri_siteindex','rast.vri2017_herbcoverpct',
                                    'rast.vri2017_shrubcrownclosure','','rast.elevation',
                                    'rast.elevation_squared','rast.eastnessx1000',
                                    'rast.northnessx1000','rast.vri_conifer','rast.vri_deciduous',
                                    'rast.vri_urban','rast.vri_pine','rast.vri_herb',
                                    'rast.vri_nonveg_land_no_urban','rast.vri_nonveg_water',
                                    'fireid > 0 AND age BETWEEN 0 AND 15',
                                    'fireid > 0 AND age BETWEEN 0 AND 15 AND rast.vri_pine = 1',
                                    'fireid > 0 AND age BETWEEN 16 AND 40',
                                    'blockid > 0 AND age BETWEEN 0 AND 15',
                                    'blockid > 0 AND age BETWEEN 16 AND 40','','rast.elevation',
                                    'rast.elevation_squared','rast.eastnessx1000',
                                    'rast.northnessx1000','rast.vri_conifer','rast.vri_deciduous',
                                    'rast.vri_urban','rast.vri_pine','rast.vri_herb',
                                    'rast.vri_nonveg_water','fireid > 0 AND age BETWEEN 0 AND 15',
                                    'fireid > 0 AND age BETWEEN 0 AND 15 AND rast.vri_pine = 1',
                                    'blockid > 0 AND age BETWEEN 0 AND 15',
                                    'blockid > 0 AND age BETWEEN 16 AND 40','','rast.elevation',
                                    'rast.elevation_squared','rast.vri_conifer','rast.vri_deciduous',
                                    'rast.vri_herb','rast.vri_pine','rast.vri_nonveg_water',
                                    'fireid > 0 AND age BETWEEN 0 AND 15',
                                    'fireid > 0 AND age BETWEEN 0 AND 15 AND rast.vri_pine = 1',
                                    'fireid > 0 AND age BETWEEN 16 AND 40',
                                    'blockid > 0 AND age BETWEEN 0 AND 15',
                                    'blockid > 0 AND age BETWEEN 16 AND 40','','rast.elevation',
                                    'rast.elevation_squared','rast.eastnessx1000',
                                    'rast.northnessx1000','rast.vri_conifer','rast.vri_deciduous',
                                    'rast.vri_herb','rast.vri_pine','rast.vri_nonveg_water',
                                    'blockid > 0 AND age BETWEEN 0 AND 15',
                                    'blockid > 0 AND age BETWEEN 16 AND 40',
                                    'fireid > 0 AND age BETWEEN 0 AND 15',
                                    'fireid > 0 AND age BETWEEN 0 AND 15 AND rast.vri_pine = 1',
                                    'fireid > 0 AND age BETWEEN 16 AND 40','','rast.elevation',
                                    'rast.elevation_squared','rast.eastnessx1000','rast.vri_conifer',
                                    'rast.vri_deciduous','rast.vri_herb','rast.vri_pine',
                                    'rast.vri_nonveg_water','fireid > 0 AND age BETWEEN 0 AND 15',
                                    'fireid > 0 AND age BETWEEN 0 AND 15 AND rast.vri_pine = 1',
                                    'fireid > 0 AND age BETWEEN 16 AND 40',
                                    'blockid > 0 AND age BETWEEN 0 AND 15',
                                    'blockid > 0 AND age BETWEEN 16 AND 40','rast.dt_crds_paved',
                                    'roadYear > 0'
                                    ),
                            reclass = c ('','','','','','','','','','','','','','','','','',
                                         "'1-6:0,7:-0.1676, 8-129:0'",
                                    "''0:0.6786,1:0.6786,2:0.6786,3:0.6786,5:0.6786,6:0.6786,7:0.3420,8:0.2420,9:0.3420,10:0.242,11:0.3420,12:0.2420,13:0.6995,14:0.6995,15:0.6995,16:-0.0345,17:-0.0345,18:-0.0345,20:0.0504,21:0,22:-0.5054,23:-0.5054,24:0.6786,25:0.6786,26:0.6786,27:0.6786,28:0.6786,29:0.6786,30:0.6786,32:0.6786,33:0'''",
                                    '','','','','','','','','','','','','','','','','','','','','','','',

"'1-6:0,7:-0.1676, 8-129:0'",
                                    "''0:0.3065,1:0.3065,2:0.3065,3:0.3065,5:0.3065,6:0.3065,7:-0.0718,8:0.3498,9:-0.0718,10:0.3498,11:-0.0718,12:0.3498,13:0.6486,14:0.6486,15:0.6486,16:-0.3210,17:-0.3210,18:-0.3210,20:0.0818,21:0,22:-1.0731,23:-1.0731,24:0.3065,25:0.3065,26:0.3065,27:0.3065,28:0.3065,29:0.3065,30:0.3065,32:0.3065,33:0'''",'','','','','','','','','','','','','','','','','','','','','','','','',

"'1-6:0,7:-0.1676, 8-129:0'",

"''0:0.3418,1:0.3418,2:0.3418,3:0.3418,5:0.3418,6:0.3418,7:0.1927,8:0.4931,9:0.1927,10:0.4931,11:0.1927,12:0.4931,13:0.5827,14:0.5827,15:0.5827,16:-0.0947,17:-0.0947,18:-0.0947,20:0.3288,21:0,22:-0.7312,23:-0.7312,24:0.3418,25:0.3418,26:0.3418,27:0.3418,28:0.3418,29:0.3418,30:0.3418,32:0.3418,33:0'''",

'','','','','','','',

"''1:1.8593,2:1.8593,3-6:0,7:0.9401,8:0,9:0.8622,10-41:0,42:0.5476,43:0.9612,44-52:0,53:0.7801,54-55:0,56:0.2068,57-122:0,123:0.2700,124-129:0''",

'','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',

"''1:0.6417,2:0.6417,3-6:0,7:-0.9283,8:0,9:-0.9048,10-41:0,42:0.0945,43:0.1301,44-52:0,53:0.0834,54-55:0,56:-0.7491,57-122:0,123:-0.4990,124-129:0''",

'','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',
'','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',
'','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',''),
                            mean = c (0.00,1.29,1735.34,8339.88,82949.34,44787.09,24934.39,25318.03,
                                      603.36,4011.11,0.00,0.00,0.00,0.00,0.00,1150.65,69.00,0.00,
                                      0.00,17.21,12.55,96.49,27.01,8.30,30.60,0.00,1.34,1931.00,
                                      7895.47,77316.24,42942.93,21326.91,23662.42,611.28,4452.44,
                                      0.00,0.00,0.00,0.00,0.00,1156.49,69.27,0.00,0.00,17.47,11.98,
                                      98.36,24.84,8.79,32.79,0.00,1.31,2078.08,8416.94,81359.64,
                                      43750.26,21859.19,24735.56,639.35,4456.65,0.00,0.00,0.00,0.00,
                                      0.00,154.68,217.87,14.46,0.00,0.00,17.42,11.88,100.07,26.40,
                                      8.51,32.08,0.00,0.00,9647.65,6603.94,3176.50,5803.03,1295.38,
                                      0.00,0.00,0.00,0.00,0.00,10.03,5.28,0.00,17.35,5000.13,
                                      3420.25,1523.83,12205.11,8696.50,4475.74,7144.74,1929.46,
                                      8435.61,21330.17,0.00,0.00,0.00,0.00,0.00,106.52,5.07,13.35,
                                      10.33,348.79,-9.81,0.00,17.61,4635.76,3687.11,11967.97,
                                      7648.06,3984.84,7812.35,2054.78,9981.83,0.00,0.00,0.00,0.00,
                                      0.00,125.61,6.13,13.70,12.51,0.00,1271.48,0.00,8.96,12265.56,
                                      3228.73,1365.56,40506.96,22820.57,13974.75,20824.17,5981.60,                                        84103.35,37553.03,0.00,0.00,0.00,0.00,0.00,145.52,-8.83,
                                      118.68,26.55,7.01,14.92,12.81,5.64,0.00,10.38,7503.31,3721.39,
                                      1253.91,40847.28,17357.50,4305.23,17758.43,74169.20,33168.18,
                                      0.00,0.00,
                                      0.00,0.00,0.00,106.37,7.25,24.52,-9.27,126.93,0.00,14.62,
                                      10313.19,3526.87,1558.78,49411.92,22547.88,7932.55,23334.30,
                                      81717.07,34228.30,0.00,0.00,0.00,0.00,0.00,95.43,4.40,12.45,
                                      -0.43,850.99,0.00,22.00,6862.00,2296.00,1681.00,8537.00,
                                      6425.00,4202.00,8055.00,2701.00,26610.00,0.00,0.00,0.00,0.00,
                                      1.00,138.00,31.00,8.00,13.00,10.00,0.00,0.00,23.00,8645.00,
                                      2135.00,
                                      1850.00,7526.00,3022.00,4826.00,1965.00,0.00,0.00,0.00,0.00,
                                      137.00,8.00,14.00,15.00,26.00,447.00,-8.00,0.00,23.00,7252.00,
                                      2903.00,1669.00,11162.00,11000.00,5260.00,8273.00,3403.00,
                                      29455.00,32868.00,0.00,0.00,146.00,6.00,16.00,20.00,0.00,0.00,
                                      0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,
                                      0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,
                                      0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,
                                      0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,
                                      0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,
                                      0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,0.00,
                                      0.00,0.00
                                      ),
                            sdev = c(1.00,1.70,1321.73,5611.60,62637.72,35184.17,24867.17,18921.11,
                                     573.78,4576.62,1.00,1.00,1.00,1.00,1.00,81.32,5.96,1.00,1.00,
                                     15.12,12.19,37.78,19.13,5.19,18.42,1.00,1.82,1578.21,5457.52,
                                     62919.17,34148.32,21454.15,16945.14,571.51,5111.67,1.00,1.00,
                                     1.00,1.00,1.00,78.84,6.13,1.00,1.00,15.51,11.98,38.14,17.60,
                                     5.65,18.30,1.00,1.79,1615.64,5912.19,64925.71,32983.11,
                                     21818.80,17889.59,594.59,5235.59,1.00,1.00,1.00,1.00,1.00,
                                     14.62,11.26,1.55,1.00,1.00,15.36,12.11,38.17,18.19,5.19,17.89,
                                     1.00,1.00,6561.15,4832.88,2655.67,3683.12,1549.52,1.00,1.00,
                                     1.00,1.00,1.00,14.11,11.12,1.00,11.52,2148.91,2252.94,251.99,
                                     6115.12,4998.32,3114.78,4147.52,1918.13,11735.18,8341.48,1.00,
                                     1.00,1.00,1.00,1.00,81.11,4.27,19.16,15.47,127.65,1.55,1.00,
                                     11.11,2482.39,2313.75,6586.27,4899.73,3211.47,4273.94,1971.17,
                                     12221.45,1.00,1.00,1.00,1.00,1.00,81.14,4.21,18.46,16.27,1.00,
                                     313.96,1.00,11.24,9651.81,3137.24,276.69,41225.40,19214.23,
                                     15863.16,12261.22,7118.27,57787.66,15172.16,1.00,1.00,1.00,1.00,
                                     1.00,53.21,1.92,64.19,19.22,4.17,18.11,15.25,9.84,1.00,11.21,
                                     6691.42,3577.95,315.65,43498.42,25323.27,5754.29,12549.83,
                                     58711.50,17199.82,1.00,1.00,1.00,1.00,1.00,69.28,4.78,19.58,
                                     2.12,55.87,1.00,12.18,8916.28,2943.80,316.76,44659.35,21144.26,
                                     7522.24,12985.42,57816.89,15734.97,1.00,1.00,1.00,1.00,1.00,
                                     83.95,9.16,16.13,1.52,274.19,1.00,12.00,3754.00,1553.00,317.00,
                                     8896.00,5271.00,4122.00,6896.00,2583.00,19385.00,1.00,1.00,1.00,
                                     1.00,1.00,84.00,23.00,5.00,19.00,16.00,1.00,13.00,4519.00,
                                     1398.00,249.00,5134.00,5663.00,3217.00,5115.00,2499.00,1.00,
                                     1.00,1.00,1.00,83.00,5.00,17.00,17.00,21.00,71.00,1.00,1.00,
                                     12.00,4316.00,2228.00,271.00,7215.00,5475.00,3662.00,6593.00,
                                     3179.00,21313.00,8951.00,1.00,1.00,86.00,5.00,17.00,21.00,1.00,
                                     1.00,1.00,1.00,1.00,1.00,1.00,1.00,1.00,1.00,1.00,1.00,1.00,
                                     1.00,1.00,1.00,1.00,1.00,1.00,1.00,1.00,1.00,1.00,1.00,1.00,
                                     1.00,1.00,1.00,1.00,1.00,1.00,1.00,1.00,1.00,1.00,1.00,1.00,
                                     1.00,1.00,1.00,1.00,1.00,1.00,1.00,1.00,1.00,1.00,1.00,1.00,
                                     1.00,1.00,1.00,1.00,1.00,1.00,1.00,1.00,1.00,1.00,1.00,1.00,
                                     1.00,1.00,1.00,1.00,1.00,1.00,1.00,1.00,1.00,1.00,1.00,1.00,
                                     1.00,1.00,1.00
                                     )
                              )

objects <- list (rsf_model_coeff = rsf_model_coeff)
paths <- list(
  cachePath = cacheDir,
  modulePath = moduleDir,
  inputPath = inputDir,
  outputPath = outputDir
)

mySim <- simInit (times = times, params = parameters, modules = modules,
                  objects = objects, paths = paths)

system.time({
mysimout <- spades (mySim)
})
# eventDiagram (mySimOut)
```

# Events

At each user defined time step, the `rsfCLUS` module calculates the resource selection function for the user defined population and season.

# Data dependencies

## Input objects

The user provides the input object: `rsf_model_coeff` that contains the resource selection function coefficients for the various covariates. In addition to the coeffiecents (beta column in the table): 

* species = declares the wildlife species for which the RSF applies (e.g., moose, caribou, wolf)

* static := declares Y/N (yes/no) if the covariate is static, meaning its value will remain static throughout the simulation or if no, the covariate will be updated as a result of the simulation

* layer := the name of the raster stored in a psql database or the name of the updated variable in `clusdb`. 

>Note: In layer column an 'int' (i.e., intercept) is needed for each rsf. If the rsf is fit with no intercept, 'int' is required but with beta = 0.

* type :=  declares the type of dynamic variable. A value in this column is needed if the static column = N. 

+ UP = 'Updatable' in `clusdb` 

+ DT = 'Distance To' 

+ RC = 'Reclass' 

* sql := the `WHERE` clause of a sql statement describing the `clusdb` variables used in the dynamic layer

* reclass := the SQL for [ST_Reclass](https://postgis.net/docs/RT_ST_Reclass.html) - follows the [reclassexpr](https://postgis.net/docs/reclassarg.html) where '(' means greater than, '[' means greater then or equal to. Ex. [a-b] = a <= x <= b in comparison to (a-b) = a < x < b

* mean:= the mean of the layer within the scope of the rsf 

* sdev := the standard deviation of the layer within the scope of the rsf 

>Note: The mean and sdev are used to standardize covariates via $x_s = \frac{x - mean}{sdev}$ If standardization is not required use `"",`


```{r, example_rsf_coeff}
print(rsf_model_coeff)
```

## Output objects

The following objects are instantiated via rsfCLUS:

* pts:= A data.table of X,Y locations - used to find distances

* rsfCovar:= A data.table of covariates used to calculate the RSF. This could be uploaded into clusdb? Not implemented.

* rsfGLM:= Inherits a glm class used for prediction of the RSF

* rsf:= A table within the `clusdb` SQLite database that stores RSFs.    

# Links to other modules

Requires dataLoaderCLUS to instantiate the `clusdb` SQLite database.

